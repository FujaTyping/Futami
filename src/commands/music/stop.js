const { Command, container } = require('@sapphire/framework');
const { EmbedBuilder, ActionRowBuilder, ButtonBuilder, ButtonStyle } = require('discord.js');

const config = require('../../config.json');
const color = config.chat.color

class StopCommand extends Command {
    constructor(context, options) {
        super(context, {
            ...options,
            name: 'stop',
            aliases: ['dc', "disconnect"],
            description: 'stop and leave voice channel'
        });
    }

    async messageRun(message) {
        const { client } = container;

        if (!message.member.voice.channel) {
            const Content = new EmbedBuilder()
                .setColor(color)
                .setTitle('‚ö†Ô∏è ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô !!')
                .setDescription('‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á')
                .setTimestamp()

            return await message.reply({ embeds: [Content] });
        } else {
            client.distube.voices.leave(message)

            const Button = new ButtonBuilder()
                .setLabel('‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏ü‡∏π‡∏ï‡∏≤‡∏°‡∏¥‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏ä‡∏∑‡πâ‡∏≠‡∏Å‡∏≤‡πÅ‡∏ü‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏ô‡∏∞')
                .setURL('https://buymeacoffee.com/fujatyping')
                .setStyle(ButtonStyle.Link);

            const Row = new ActionRowBuilder()
                .addComponents(Button);

            const Content = new EmbedBuilder()
                .setColor(color)
                .setTitle('üëãüèª ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß !!')
                .setDescription('‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ ‡∏ü‡∏π‡∏ï‡∏≤‡∏°‡∏¥ üíô ‡πÑ‡∏ß‡πâ‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ô‡πâ‡∏≤ ~~\n‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô‡∏ü‡∏π‡∏ï‡∏≤‡∏°‡∏¥‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏≤‡πÅ‡∏ü‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà : <:BTBMAC:1230573925881221162> [Buy me a coffee](https://buymeacoffee.com/fujatyping)')
                .setFooter({ text: `‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÇ‡∏î‡∏¢ : ${message.author.username}`, iconURL: message.author.avatarURL() })
                .setTimestamp()

            return await message.channel.send({ embeds: [Content] });
        }
    }
}
module.exports = {
    StopCommand
};